<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <main class="l-wrapper l-wrapper--sm l-main-container">
    <section>
      <app-form-group label="Personal Details">
        <div class="c-form-split-col h-mb-40">
          <app-form-element [error]="getError('firstName')" label="First Name">
            <input class="ui-input ui-input--large" type="text" placeholder="First Name" formControlName="firstName" />
          </app-form-element>
          <app-form-element [error]="getError('lastName')" label="Last Name">
            <input class="ui-input ui-input--large" type="text" placeholder="Last Name" formControlName="lastName" />
          </app-form-element>
          <app-form-element [error]="getError('email')" label="Email Address">
            <input class="ui-input ui-input--large" type="email" placeholder="Email" formControlName="email" />
          </app-form-element>
          <app-form-element [error]="getError('phoneNumber')" label="Phone Number">
            <input class="ui-input ui-input--large" type="tel" placeholder="(###) ###-####" [mask]="phoneNumberMask.getMaskPattern()" formControlName="phoneNumber">
          </app-form-element>
        </div>
      </app-form-group>

      <app-form-group label="Address" formGroupName="address">
        <div class="c-form-split-col-3 h-mb-20">
          <app-form-element [error]="getError('address.street')" label="Street Address" class="c-form-split-col-3__2-third-row">
            <input class="ui-input ui-input--large" type="text" placeholder="Street Address" formControlName="street" />
          </app-form-element>
          <app-form-element [error]="getError('address.unit')" label="Unit" class="c-form-split-col-3__1-third-row">
            <input class="ui-input ui-input--large" type="text" placeholder="Unit" formControlName="unit" />
          </app-form-element>
        </div>
        <div class="c-form-split-col-3 h-mb-20">
          <app-form-element [error]="getError('address.city')" label="City" class="c-form-split-col-3__1-third-row">
            <input class="ui-input ui-input--large" type="text" placeholder="City" formControlName="city" />
          </app-form-element>

          <app-form-element [error]="getError('address.state')" label="State" class="c-form-split-col-3__1-third-row">
            <app-us-state-input formControlName="state"></app-us-state-input>
          </app-form-element>

          <app-form-element [error]="getError('address.zipCode')" label="ZIP Code" class="c-form-split-col-3__1-third-row">
            <input class="ui-input ui-input--large" type="text" placeholder="Zip Code" formControlName="zipCode" />
          </app-form-element>
        </div>
      </app-form-group>
    </section>

    <section>
      <app-form-group label="Additional">
        <div class="c-form-split-col">
          <app-panel class="h-flex-y-center">
            <app-avatar [user]="user" size="xlarge" class="h-mb-20"></app-avatar>
            <app-form-element [error]="getError('avatar')">
              <app-file-input
                formControlName="avatar"
                [usePreview]="false"
                [label]="'Upload Photo'"
                [purpose]="getFilePurpose()"
                (uploaded)="onAvatarChange($event)"
              ></app-file-input>
            </app-form-element>
          </app-panel>
          <app-form-element [error]="getError('accessLevel')">
            <select class="ui-select ui-select--large" formControlName="accessLevel">
              <option value="support">Support</option>
              <option value="admin">Administrator</option>
            </select>
          </app-form-element>
        </div>
      </app-form-group>
    </section>

    <button app-button type="submit" class="h-margin-center h-mt-40">
      {{ user ? 'Save Changes' : 'Create Profile' }}
    </button>
  </main>
</form>
